# H-BAT

## Hydrogen Bond Analysis Tool for Molecular Simulation Trajectories

H-BAT is a Big Data analytics tool to analyze the Hydrogen bonds in the molecular simulation trajectories. The available tools perform the same analysis but they fail with large trajectories with water or are unable to handle multiple trajectories simultaneously. This tool is scalable and portable on any distributed computing platform and can find out Hydrogen bonds between all types of residues including water. A Nearest neighbor algorithm is used to boost the performance of the tool in terms of h-bond calculations.

**Key Features:**
* Easy analysis of Big data as it is stored on Hadoop file system
* Fault tolerant and fast parallel processing of distributed data
* Support for both in-memory and on-disk data operations
* Scalable and portable on any distributed computing platform
* Nearest Neighbor approach used to optimize performance
* Hydrogen bonds between all types of residues including water-water interaction is possible
* It can analyse PDB, AMBER and GROMACS trajectories
* Hydrogen Bond parameters like Bond distance and angle are configurable 

## Sample Input Data

Sample Input data is provided here for Amber and Gromacs type of trajectories.
<br/>
Google Drive link for the sample input data [ Click here ](https://drive.google.com/drive/u/2/folders/1vzk3w4xARlkqogL3pzBIwwAA5sKCQv4d)


## Usage

Using the deployed jar file for the tool it can be executed on any stand-alone desktop machine or a big data cluster with n number of nodes.Following is the way to execute it.

### 1. Stand-alone Usage

HBAT tool can be executed on a stand-alone desktop machine on which JAVA is installed. Below is the command line usage for the JAVA jar file.


```bash

java -jar <JAR file path> [command] [command options]

```

Example for execution:

```bash

java -jar <JAR file path> hbat -f <filter file path> -i <input file path> -o <output path> -l --pdb

```

#### Command  
`hbat` command is used to execute the application. It takes various inputs like Trajectory file path, Output path and a Filter file. It also has various options to set the hbond parameters

#### Command Options

Following are the Command line options available for the `hbat` command

**Required Options**

| Option | Description |
| ------ | ------ |
|  --filter, -f | Path of Filter file |
|  --input, -i | Path of Trajectory Input File| 
|  --output, -o | Path of Output Directory | 

**Other Optional Options**

| Option | Description |
| ------ | ------ |
| --local, -l  | Run on the local machine <br> Default: false |
| --topology, -t  | Topology file path |
| --pdbtopology, -p  |Topology file path in PDB format for GROMACS input |
| --frameInfo  | All unique Hbonds with acceptor, hydrogen, donor, Count and Percent <br> Default: false  |
| --bondAngle, -b | Bond angle - Lower limit of the angle in degree. Upper limit is by default set to 180 degree <br> Default: 135.0 | 
| --distanceHeavyAtoms, -d2  | Distance between the heavy Atoms <br> Default: 3.5 |
| --distanceHydrogenBond, -d1  | Distance for the Hydrogen Bond <br> Default: 3.5 |
| --skipAngle  | Skip Bond Angle for calculating HBonds <br> Default: false |
| --skipSolvent  | Skip Solvent, whether to consider or skip the solvent for finding hbonds <br> Default: false |
| --skipSolventSolvent  | Skip calculation of solvent-solvent Hydrogen bonds <br> Default: false |
| --solvents  | Explicitly specify the solvent Molecule present in the trajectory <br> Default: [SOL, WAT] |
| --perModelSkip  | Offset to skip frames for calculation (Works for Amber format) <br> Default: 0 |
| --amber | Amber input <br> Default: false|
| --gromacs  | Gromacs input <br> Default: false |
| --pdb  | PDB input <br> Default: false |
| --log  | Detailed Log of the backend Executions <br> Default: false |



### 2. Hadoop Cluster Usage
For significantly big data it can also be executed on a Hadoop cluster with SPARK where data is stored on HDFS. The application can be executed using the spark-submit command.


```bash

spark-submit [spark-options] <application Jar file path> [command] [command options]

```

Example:
```bash

spark-submit --deploy-mode client --master yarn --driver-memory 50g --driver-cores 25 --executor-memory 48g --executor-cores 15 --num-executors 80 /home/hbat-1.0-jar-with-dependencies.jar hbat -i file:///home/new_data/protwat.mdcrd -t file:///home/new_data/protwat.prmtop -f file:///home/dna_protein_water.txt -o file:///home/output_1 --log --skipSolventSolvent

```

The [command](#command) and [command options](#command-options) are already described above.













# GenoVault "A Cloud Based Genomic Repository"

## GenoVault  Installer

# JDK  
        Install Java 1.8 or above
# MySQl 
        Install MySQL Server 5.6.33 or above
	        $ sudo apt update
	        $ sudo apt install mysql-server
	        $ sudo mysql_secure_installation
# Download GenoVault Database MySql dump
<br/>
Google Drive link for the mysql data [ Click here ](https://drive.google.com/file/d/18XeirSKyFxMwrVz_o_2RVT0gxlEZeCor/view?usp=sharing)

# Import the default database
         $ mysql -u root -p
	        mysql> CREATE DATABASE genovaultdb;
	        $ mysql -u root -p < genovault.sql;
        Set environment variables.
 	        $ mkdir -p $HOME/genovault/upload
	        $ mkdir -p $HOME/genovault/download
	        $ cat >> .bashrc <<EOF 
	                export GENOVAULT=$HOME/genovault
                        
# Web Based Client:
Download Widfly 10.x server
Extract 
	tar -xvf Widfly 10.x
Copy Genome-1.jar Jar file from GenoVaul_Jar's folder into the Wildfly deployment folder.	
    cp Genome-1.jar ~/wildfly/standalone/deployments/
Change the Database server hostname and port as per user setting.
By default admin user is created for ADMIN module (password admin). Change the password once logged in and create appropriate users for GenoVault module
Standalone Client:
Copy the fdt.jar from the Standalone directory to the destination directory
Run fdt Jar on the Server from the 
	java -jar fdt.jar
Copy the Standalone client jar that is GenovaultFX-1.jar
Run GenovaultFX-1.jar from the Client machine
       java -jar GenovaultFX-1.jar
